<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slot Machine</title>
    <style>
        /* Same styles as before */
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
</head>
<body>
    <!-- Username Input Section -->
    <div id="username-container">
        <label for="username">Enter Username:</label>
        <input type="text" id="usernameInput" placeholder="Username">
        <button id="submitUsername">Submit</button>
    </div>
    
    <!-- Slot Machine Section (Initially hidden) -->
    <div id="slot-machine-container" style="display:none;">
        <div class="slot-machine">
            <div class="column" id="slot1">🍒</div>
            <div class="column" id="slot2">🍍</div>
            <div class="column" id="slot3">🍉</div>
            <div class="column" id="slot4">BAR</div>
            <div class="column" id="slot5">7</div>
        </div>
        <button id="spin-button" style="display:none;">Spin</button>
    </div>

    <!-- Leaderboard Section (Initially hidden) -->
    <div id="leaderboard" style="display:none;">
        <h2>Leaderboard</h2>
        <ol id="leaderboardList"></ol>
    </div>

    <script>
        // Firebase configuration (replace with your actual Firebase keys)
        const firebaseConfig = {
            apiKey: "AIzaSyALicRxGiwTyPxPt_qUGAwIXCccXAuiq5k",
            authDomain: "bambling12.firebaseapp.com",
            projectId: "bambling12",
            storageBucket: "bambling12.appspot.com",
            messagingSenderId: "336411073825",
            appId: "1:336411073825:web:465d13c43a93bf0a637260",
            measurementId: "G-6X71J6E66P"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Handle Username Submission
        document.getElementById('submitUsername').addEventListener('click', () => {
            const username = document.getElementById('usernameInput').value;

            if (username.trim() !== "") {
                localStorage.setItem('username', username);

                // Hide username input and show the slot machine and leaderboard
                document.getElementById('username-container').style.display = 'none';
                document.getElementById('slot-machine-container').style.display = 'block';
                document.getElementById('leaderboard').style.display = 'block';
                document.getElementById('spin-button').style.display = 'inline-block';

                displayLeaderboard(); // Load the leaderboard
            } else {
                alert("Please enter a valid username.");
            }
        });

        // Function to display leaderboard
        function displayLeaderboard() {
            const leaderboardRef = database.ref('leaderboard');
            leaderboardRef.once('value', (snapshot) => {
                const leaderboard = snapshot.val() || {};
                const sortedLeaderboard = Object.entries(leaderboard).sort((a, b) => b[1] - a[1]);

                const leaderboardList = document.getElementById('leaderboardList');
                leaderboardList.innerHTML = '';
                sortedLeaderboard.forEach(([user, score]) => {
                    const li = document.createElement('li');
                    li.innerText = `${user}: $${score}`;
                    leaderboardList.appendChild(li);
                });
            });
        }
    </script>
</body>
</html>
